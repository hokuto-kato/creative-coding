let engine,world,font,hourText,minuteText,secondText,Engine=Matter.Engine,Bodies=Matter.Bodies,boundaries=[],hourPolygons=[],minutePolygons=[],secondPolygons=[];const getTime=()=>{hourText=hour(),minuteText=minute(),secondText=second()},initClock=()=>{getTime(),showText(),hourPolygons.forEach((o=>{o.remove(),hourPolygons=[]})),minutePolygons.forEach((o=>{o.remove(),minutePolygons=[]})),secondPolygons.forEach((o=>{o.remove(),secondPolygons=[]}));for(let o=0;o<hour();o++)hourPolygons.push(new HourPolygon(140,0,20,20));for(let o=0;o<minute();o++)minutePolygons.push(new MinutePolygon(360,0,20,20));for(let o=0;o<second();o++)secondPolygons.push(new SecondPolygon(580,0,20,20))},showText=()=>{textSize(20),fill(255),noStroke(),textFont(font),text(hourText,120,height-15),text(minuteText,345,height-15),text(secondText,580,height-15)},polygon=(o,e,n,t)=>{let i=TWO_PI/t;beginShape();for(let t=0;t<TWO_PI;t+=i){let i=o+cos(t)*n,s=e+sin(t)*n;vertex(i,s)}endShape(CLOSE)},handleSecond=()=>{getTime(),0===hour()&&0===minute()&&0===second()&&(hourPolygons.forEach((o=>{o.remove(),hourPolygons=[]})),minutePolygons.forEach((o=>{o.remove(),minutePolygons=[]})),secondPolygons.forEach((o=>{o.remove(),secondPolygons=[]}))),0===minute()&&(minutePolygons.forEach((o=>{o.remove(),minutePolygons=[]})),0!==hour()&&0===second()&&hourPolygons.push(new HourPolygon(random(139,140),0,20,20))),0===second()?(secondPolygons.forEach((o=>{o.remove(),secondPolygons=[]})),0!==minute()&&minutePolygons.push(new MinutePolygon(random(359,360),0,20,20))):secondPolygons.push(new SecondPolygon(random(589,590),0,20,20))};function preload(){font=loadFont("./font/Minimal-Mono-Regular.74c5807107a72a9f08ab.ttf")}function setup(){createCanvas(720,720),engine=Engine.create(),world=engine.world,boundaries=[new Boundaries(25,height/2,50,2*height),new Boundaries(245,height/2,50,2*height),new Boundaries(475,height/2,50,2*height),new Boundaries(695,height/2,50,2*height),new Boundaries(0,height-25,2*width,50)],Matter.Runner.run(engine),initClock(),setInterval(handleSecond,1e3)}function draw(){background(0),stroke(255),strokeWeight(.3);for(let o=1;o<width;o++)line(o*width/10+random(0,10),0,o*width/10+random(0,10),height);boundaries.forEach((o=>{o.show()})),hourPolygons.forEach((o=>{o.show()})),minutePolygons.forEach((o=>{o.show()})),secondPolygons.forEach((o=>{o.show()})),showText()}document.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState&&initClock()}));