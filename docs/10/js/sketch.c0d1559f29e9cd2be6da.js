let engine,world,hour,minute,second,font,Engine=Matter.Engine,Bodies=Matter.Bodies,boundaries=[],hourPolygons=[],minutePolygons=[],secondPolygons=[];const getTime=()=>{hour=(new Date).getHours(),minute=(new Date).getMinutes(),second=(new Date).getSeconds()},init=()=>{getTime();for(let o=0;o<hour;o++)hourPolygons.push(new HourPolygon(140,0,20,20));for(let o=0;o<minute;o++)minutePolygons.push(new MinutePolygon(360,0,20,20));for(let o=0;o<second;o++)secondPolygons.push(new SecondPolygon(580,0,20,20))},showText=()=>{textSize(20),fill(255),noStroke(),textFont(font),text(hour,120,height-15),text(minute,345,height-15),text(second,580,height-15)},polygon=(o,e,n,t)=>{let s=TWO_PI/t;beginShape();for(let t=0;t<TWO_PI;t+=s){let s=o+cos(t)*n,h=e+sin(t)*n;vertex(s,h)}endShape(CLOSE)},handleSecond=()=>{setInterval((()=>{secondPolygons.push(new SecondPolygon(random(570,590),20,20,20)),0===hourPolygons.length&&(hourPolygons.forEach((o=>{o.remove(),hourPolygons=[]})),minutePolygons.forEach((o=>{o.remove(),minutePolygons=[]})),secondPolygons.forEach((o=>{o.remove(),secondPolygons=[]}))),0===minute&&(minutePolygons.forEach((o=>{o.remove(),minutePolygons=[]})),hourPolygons.push(new HourPolygon(140,0,20,20))),0===second&&(secondPolygons.forEach((o=>{o.remove(),secondPolygons=[]})),minutePolygons.push(new MinutePolygon(360,0,20,20)))}),1e3)};function preload(){font=loadFont("./font/Minimal-Mono-Regular.74c5807107a72a9f08ab.ttf")}function setup(){createCanvas(720,720),engine=Engine.create(),world=engine.world,boundaries=[new Boundaries(25,height/2,50,2*height),new Boundaries(245,height/2,50,2*height),new Boundaries(475,height/2,50,2*height),new Boundaries(695,height/2,50,2*height),new Boundaries(0,height-25,2*width,50)],Matter.Runner.run(engine),init(),setInterval((()=>{secondPolygons.push(new SecondPolygon(random(570,590),20,20,20)),0===hourPolygons.length&&(hourPolygons.forEach((o=>{o.remove(),hourPolygons=[]})),minutePolygons.forEach((o=>{o.remove(),minutePolygons=[]})),secondPolygons.forEach((o=>{o.remove(),secondPolygons=[]}))),0===minute&&(minutePolygons.forEach((o=>{o.remove(),minutePolygons=[]})),hourPolygons.push(new HourPolygon(140,0,20,20))),0===second&&(secondPolygons.forEach((o=>{o.remove(),secondPolygons=[]})),minutePolygons.push(new MinutePolygon(360,0,20,20)))}),1e3)}async function draw(){background(0),getTime(),stroke(255),strokeWeight(.2);for(let o=1;o<width;o++)line(o*width/10+random(0,10),0,o*width/10+random(0,10),height);boundaries.forEach((o=>{o.show()})),hourPolygons.forEach((o=>{o.show()})),minutePolygons.forEach((o=>{o.show()})),secondPolygons.forEach((o=>{o.show()})),textSize(20),fill(255),noStroke(),textFont(font),text(hour,120,height-15),text(minute,345,height-15),text(second,580,height-15)}